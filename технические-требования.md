# Технические требования к итоговому продукту

## Системные требования

### Среда выполнения
- **Node.js**: версия 20.0.0 или выше
- **npm**: версия 9.0.0 или выше
- **Docker**: для контейнеризации (опционально)
- **Docker Compose**: для оркестрации сервисов (опционально)

### Операционная система
- Linux (рекомендуется для production)
- Windows (для разработки)
- macOS (для разработки)

---

## Архитектура системы

### Компоненты продукта

1. **Чат-бот** (TypeScript/Node.js)
   - Интеграция с MAX Bot API v0.2.1
   - Обработка команд пользователей
   - Интеграция с API сервером

2. **Мини-приложение** (React 18.3.1)
   - Frontend на базе Vite 5.4.0
   - Использование MAX UI компонентов (@maxhub/max-ui v0.1.12)
   - React Router для навигации

3. **API сервер** (Express 4.18.2)
   - RESTful API
   - Порт: 3002
   - CORS поддержка
   - Интеграция с базой данных

4. **База данных** (SQLite)
   - better-sqlite3 v9.2.2
   - Хранение пользовательских данных
   - Хранение расписания и событий

---

## Технологический стек

### Backend
- **Runtime**: Node.js 20+
- **Язык**: TypeScript 5.4.2+
- **Фреймворк**: Express 4.18.2
- **База данных**: SQLite (better-sqlite3 9.2.2)
- **Парсинг**: Cheerio 1.1.2
- **HTTP клиент**: Axios 1.13.2
- **Планировщик задач**: node-cron 3.0.3

### Frontend
- **Фреймворк**: React 18.3.1
- **Сборщик**: Vite 5.4.0
- **Роутинг**: React Router DOM 6.26.0
- **UI библиотека**: @maxhub/max-ui 0.1.12

### Инфраструктура
- **Контейнеризация**: Docker
- **Веб-сервер**: Nginx (для production)
- **Оркестрация**: Docker Compose

---

## Функциональные требования

### Основной функционал
- ✅ Просмотр расписания занятий
- ✅ Управление дедлайнами
- ✅ Просмотр мероприятий
- ✅ Информация о преподавателях
- ✅ Управление практикой и стажировками
- ✅ Профиль пользователя
- ✅ Настройки уведомлений
- ✅ Поддержка пользователей

### API требования
- RESTful архитектура
- CORS поддержка для кросс-доменных запросов
- JSON формат данных
- Обработка ошибок и валидация

---

## Требования к развертыванию

### Production окружение
- **Порты**:
  - API сервер: 3002
  - Мини-приложение: 80 (через Nginx)
- **Переменные окружения**:
  - `NODE_ENV=production`
  - `PORT=3002`
  - `DB_PATH=/app/data/campus.db`
  - `BOT_TOKEN` (токен чат-бота)
  - `QWEN_API_TOKEN` (токен AI API, опционально)
  - `API_URL` (URL API сервера для чат-бота)

### Docker требования
- Многоэтапная сборка для оптимизации размера
- Использование Alpine Linux для минимального размера образа
- Автоматический перезапуск контейнеров
- Изолированная сеть для сервисов

### Nginx конфигурация
- Gzip сжатие
- Проксирование API запросов
- SPA роутинг
- Кэширование статических файлов
- Безопасность заголовков

---

## Требования к производительности

- **Время отклика API**: < 500ms для стандартных запросов
- **Размер Docker образа**: оптимизирован через multi-stage build
- **Сжатие**: Gzip для всех текстовых ресурсов
- **Кэширование**: статические файлы кэшируются на 1 год

---

## Требования к безопасности

- CORS настройки для контроля доступа
- Заголовки безопасности (X-Frame-Options, X-Content-Type-Options, X-XSS-Protection)
- Изоляция сервисов через Docker network
- Переменные окружения для чувствительных данных

---

## Требования к совместимости

- **Браузеры**: современные браузеры с поддержкой ES6+
- **Платформа MAX**: совместимость с MAX Bot API v0.2.1
- **Мобильные устройства**: адаптивный дизайн для мобильных устройств

---

## Требования к разработке

### Инструменты разработки
- TypeScript компилятор
- Vite dev server с hot reload
- tsx для запуска TypeScript файлов
- concurrently для параллельного запуска сервисов

### Структура проекта
- Модульная архитектура
- Разделение на компоненты (chatbot, miniapp, api-server)
- Общие утилиты (shared-utils)
- Типизация TypeScript для всех компонентов

---

## Дополнительные требования

- **Мониторинг**: логирование через стандартные механизмы Node.js
- **Масштабируемость**: возможность горизонтального масштабирования через Docker
- **Резервное копирование**: регулярное резервное копирование базы данных
- **Документация**: README с инструкциями по установке и запуску

